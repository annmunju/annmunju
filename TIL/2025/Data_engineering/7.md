---
marp: true
title: 견고한 데이터 엔지니어링 (7장 요약)
description: 
author: annmunju
theme: default
paginate: true
---

# 견고한 데이터 엔지니어링
## 7장 요약

> 데이터 수집

---

# 7.1 데이터 수집이란?
> 데이터 수집과 데이터 통합의 차이
> 데이터 파이프라인 정의

- 데이터 파이프라인은 데이터 엔지니어링 수명 주기의 단계를 통해 데이터를 이동시키는 아키텍처, 시스템 및 프로세스의 조합이다.

---

# 7.2 수집 단계의 주요 엔지니어링 고려 사항

## 7.2.1 유한 데이터 vs 무한 데이터
- 비즈니스 프로세스는 데이터를 개별 배치로 인위적으로 잘라내 제한을 두어왔음.
- 모든 데이터는 유한해질 때 까지 무한함

## 7.2.2 빈도
- 배치 : 빈번함
- 마이크로 배치 : 꽤 빈번함
- 실시간 : 매우 빈번함 (스트리밍과 같은 의미로 사용)

---

## 7.2.3 동기 수집 vs 비동기 수집
- 동기 수집 : 원천 -> 수집 -> 대상(스토리지) 가 복잡한 의존성을 가지며 밀접하게 결합됨.
    - 중간 과정 중 하나라도 실패하면 다시 작업해야함.
- 비동기 수집 : 개별 이벤트 수준에서, 데이터가 들어오는 즉시, 처리할 수 있는 리소스(컴퓨터 자원)가 있다면 바로 처리

## 7.2.4 직렬화와 역직렬화
> 원천으로부터 데이터를 인코딩하고 송신 및 중간 저장 단계를 위해 데이터 구조를 준비

---

## 7.2.5 처리량과 확장성
- 처리량 확장에 서버, 샤드, 워커 등을 지원하는 관리형 서비스를 사용

## 7.2.6 신뢰성과 내구성
- 데이터 손실에 따른 영향과 비용으로 리스크를 미리 평가
- 직접 비용과 간접 비용 평가

---

## 7.2.7 페이로드
- 수집하려는 데이터셋의 종류, 형태, 크기, 스키마, 데이터 유형, 메타데이터 특성 알기
1. 종류(kind) : type, format
2. 형태(shape) : 표, json, txt, image, audio
3. 크기(size) : 바이트 수
4. 스키마와 데이터 유형
    - 애플리케이션의 클래스 구조로 감싸진 경우가 있고
    - API로 감싸져 있는 경우가 종종 있어, 애플리케이션 코드를 이해해야 하는 경우가 종종 있음
    - 업스트림 및 다운스트림 스키마 변경 검출과 처리
5. 메타데이터

---

### 업스트림 / 다운스트림 스키마 변경 검출과 처리

#### a. 개념
- **업스트림(Upstream)**: 데이터를 생성/제공하는 쪽 (예: 소스 DB, API).
- **다운스트림(Downstream)**: 데이터를 소비/활용하는 쪽 (예: DWH, ML 모델, 대시보드).

#### b. 스키마 변경 유형
- 열 추가 (Add column)
- 열 삭제 (Drop column)
- 열 타입 변경 (Change type)
- 열 이름 변경 (Rename column)
- 열 순서 변경

---

#### c. 변경 검출 방법
- 메타데이터 비교 (`INFORMATION_SCHEMA` 등)
- DWH 시스템 테이블 조회 (BigQuery, Snowflake 등)
- CDC(Change Data Capture) 로그 감지 (Debezium, Kafka Connect)
- 스키마 레지스트리 (Kafka, Glue, Confluent)

#### d. 변경 처리 전략
- **호환 가능 (추가)** → 무시하거나 `NULL` 처리, 자동 수용
- **호환 불가능 (삭제/타입 변경/이름 변경)**  
  - 스키마 에볼루션 지원 시스템 활용 (Hive, Delta Lake, Iceberg)  
  - 변환 레이어 도입 (새 스키마 ↔ 표준 스키마 매핑)  
  - 다운스트림 코드/쿼리 수정  
---

#### e. 실무 패턴
- 스키마 호환성 정책 정의 (예: 열 추가 허용, 삭제는 협의 필요)
- 자동 알림 (Airflow, DBT, Kafka Connect → Slack/Email)
- 스키마 버전 관리 (버전 태깅, 선택적 소비)
- 표준화 계층(Transform Layer) 운영

---

## 7.2.8 푸시 vs 풀 vs 폴링 패턴

- 푸시 전략은 원천에서 대상으로 보내줌
- 풀 전략은 대상에서 원천 데이터를 끌어옴
- 폴링은 변경 사항이 감지되면 풀과 같이 대상에서 원천을 끌어옴

---

