---
marp: true
title: 견고한 데이터 엔지니어링 (5장 요약)
description: 데이터 원천과 원천 시스템의 이해
author: annmunju
theme: default
paginate: true
style: |
  table {
    width: 100%;
    height: 100%;
  }
---
<!--
이 문서는 견고한 데이터 엔지니어링 5장의 핵심 내용을 요약합니다.
원천 시스템, 데이터 생성 방식, OLTP/OLAP/CDC 등 주요 개념을 다룹니다.
-->

# 견고한 데이터 엔지니어링
## 5장 요약

> 1단계: 원천 시스템에서의 데이터 생성

---

## 5.1. 데이터 원천
> 아날로그 데이터와 디지털 데이터
> 원천 시스템과 그 데이터가 생성하는 방법에 익숙해지기

---

## 5.2. 원천 시스템: 주요 아이디어

### 5.2.1. 파일과 비정형 데이터
> 파일은 데이터 교환의 보편적 매개체
> 정형 / 반정형 / 비정형

### 5.2.2. API
> 시스템 간 데이터 교환 표준 방식

---

### 5.2.3. OLTP (Online Transaction Processing)
-   **목적**: 수많은 작고 빈번한 트랜잭션 정확하게 처리. 짧은 지연시간과 높은 동시성
-   **핵심**: 데이터 무결성과 신뢰성을 위한 ACID 특성 필수
    -   ACID: 트랜잭션의 안정성과 신뢰성을 보장하는 4가지 원칙

---

### ACID 원칙 상세

| 속성                        | 설명                                        | 비유                          |
| ------------------------- | ----------------------------------------- | --------------------------- |
| **A - 원자성 (Atomicity)**   | 하나의 트랜잭션은 **모두 실행되거나 전혀 실행되지 않아야 함**      | ATM 이체 중간에 끊기면 입금/출금 둘 다 취소 |
| **C - 일관성 (Consistency)** | 트랜잭션 전후로 데이터는 항상 **정해진 규칙(제약조건)을 만족**해야 함 | 재고 수량이 음수가 되면 안 됨           |
| **I - 고립성 (Isolation)**   | 동시에 여러 트랜잭션이 실행돼도 **서로 간섭하지 않아야 함**       | 두 사용자가 동시에 같은 좌석 예매 못하게     |
| **D - 지속성 (Durability)**  | 트랜잭션이 성공하면 결과는 **시스템 오류가 나도 보존되어야 함**     | 주문이 완료됐으면 서버 꺼져도 기록 유지      |

---

### 5.2.4. OLAP (Online Analytical Processing)
-   **목적**: 대규모 데이터에 대한 대화형 분석 쿼리 지원 (BI)
-   **특징**: 열 기반 저장 방식

---

### 5.2.5. CDC (Change Data Capture)
-   DB 발생 변경 이벤트 추출 
-   NoSQL DB 해당 로그를 저장하는 역할로도 사용

### 5.2.6. 로그
-   로그 소스, 인코딩, 해상도, 지연시간 고려

### 5.2.7. 데이터베이스 로그
-   **DB 로그**: 원본의 모든 변경을 순차적으로 트랜잭션 로그에 기록
-   **CDC**: DB 로그를 읽어 로우레벨 이벤트로 변환 후 큐/토픽(Kafka, Kinesis 등)에 게시
    -   게시된 이벤트 스트림을 통해 실시간 대응, 분석, 복제 효율적 수행

---

### 5.2.8. CRUD (Create, Read, Update, Delete)
> 프로그래밍에서 일반적으로 사용되는 트랜잭션 패턴

### 5.2.9. 입력 전용 (Insert-Only)
-   데이터를 원본 그대로 기록만 하고, 읽기(조회)는 다른 구조/경로에서 수행

---

### 5.2.10. 메시지와 스트림 비교

| 구분     | 메시지 큐                     | 스트리밍 플랫폼                             |
| ------ | ------------------------- | ------------------------------------ |
| 소비 모델  | 파괴적 소비 (하나에게만 전달)         | 비파괴적 소비 (여러 소비자에서 독립적으로 처리)          |
| 데이터 보존 | 전송 후 삭제됨                  | 보존 기간 동안 유지되며 리플레이 가능                |
| 운영 패턴  | point‑to‑point (1:1)      | pub/sub (1\:N), 또는 다수 grp에서 병렬 처리 가능 |
| 처리 보장  | 하나만 처리 → 중복 없음            | at‑least‑once 또는 exactly‑once 처리 가능  |
| 통신 지연  | 낮지만 소비자 오프셋 관리 어려움        | low-latency & high‑throughput 실시간성   |
| 주 용도   | 단일 task 전달, command queue | 이벤트시계, 로그, 분석, 복제, 히스토리 관리 등         |
| 서비스 예시 | SQS, RabbitMQ, ActiveMQ | Kafka, Kinesis, Pub/Sub     |

---

### 5.2.11. 시간 유형
-   **이벤트 시간**: 데이터 생성 시점
-   **수집 시간**: 이벤트가 다른 위치로 수집된 시점
-   **처리 시간**: 수집 시간 이후 데이터 처리 시작 시점
-   **처리에 걸린 시간**: 데이터 처리 소요 시간

---

## 5.3. 원천 시스템의 실질적인 세부 사항

### 5.3.1. 데이터베이스: 주요 고려사항

-   **DBMS**: 저장, 쿼리 계획, 복구, 인덱싱 등 핵심 컴포넌트 포함
-   **쿼리 옵티마이저**: 쿼리 실행 계획 생성 및 성능 최적화
-   **확장 & 분산**: 확장성, 복제, 장애 복원성을 고려한 분산 설계
-   **모델링 패턴**: 정규화, 차원 모델, 데이터 볼트 등
-   **CRUD**: OLTP 시스템의 핵심 작업 유형
-   **일관성**: ACID (강한) vs BASE (점진적)

---

### 5.3.1.1. 관계형 데이터베이스 (RDBMS)

### 5.3.1.2. 비관계형 데이터베이스 (NoSQL)
-   관계형 제약 해제로 성능, 확장성, 스키마 유연성 향상
-   **유형**:
    -   키-값 쌍 저장소 (Redis)
    -   도큐먼트 저장소
    -   와이드-컬럼 데이터베이스 (Cassandra, HBase, Bigtable)
    -   그래프 데이터베이스
    -   검색 데이터베이스 (Elastic Search)
    -   시계열 데이터베이스

---

### 5.3.2. API
-   **REST**: 각 호출 독립적, 데이터 수집 파이프라인 활용 증대
-   **GraphQL**: 데이터 쿼리 언어, REST API 대안
-   **웹훅**: 이벤트 기반 데이터 전송 패턴 (HTTP 엔드포인트 호출)
-   **RPC와 gRPC**: 분산 컴퓨팅 원격 프로시저 호출

---

### 5.3.3. 데이터 공유 & 3.4. 서드파티 데이터 원천
-   메타데이터 기반 접근 (물리적 이동/복제 없이)
-   정교한 권한 설정 (특정 행/열/주요 데이터만 공유)

---

### 5.3.3.1. 서드파티 데이터 vs 데이터 마켓플레이스

| 항목             | 의미                                                     |
| -------------- | ------------------------------------------------------ |
| **서드파티 데이터**   | **내가 직접 수집한 게 아닌, 다른 회사가 수집한 외부 데이터 자체** (데이터의 ‘성격’)   |
| **데이터 마켓플레이스** | **그런 서드파티 데이터를 사고팔거나 공유할 수 있게 해주는 플랫폼** (데이터의 ‘유통 경로’) |

---

### 5.3.5. 메시지 큐와 이벤트 스트리밍 플랫폼 (심화)
-   이벤트 기반 아키텍처 활용 증대 (클라우드, 실시간 서비스)

#### 5.3.5.1. 메시지 큐
-   게시 및 구독 모델
-   **고려사항**: 메시지 순서 지정 및 전달, 전달 빈도(멱등성), 확장성

#### 5.3.5.2. 이벤트 스트리밍 플랫폼
-   **토픽**: 생산자가 토픽에 게시, 구독자가 가져옴
-   **스트림 파티션**: 스트림 분할, 핫스폿팅 방지
-   **내결함성/복원성**: 레코드 손실 방지

---

## 5.4. 함께 작업할 대상
-   **이해관계자 고려**: 시스템 생산자(업스트림)와 데이터 소비자(다운스트림)
-   **문제 인식**: 업스트림 소스 데이터 문제의 데이터 엔지니어링 영향 파악
-   **사용 방식 명시**: 데이터 추출 방법, 생산자 명시 (문서화)
-   **성능 관리**: SLA (서비스 수준 계약), SLO (서비스 수준 목표) 활용

---

## 5.5. 드러나지 않는 요소가 원천 시스템에 미치는 영향

### 5.5.1. 보안
-   데이터 암호화
-   접근 보안 (VPN)
-   비밀번호, 토큰, 자격 증명 보관
-   비밀번호 규칙

---

### 5.5.2. 데이터 관리
-   **데이터 거버넌스**: 업스트림 데이터 관리 주체
-   **데이터 품질**: 품질 및 무결성 보장 (기대치 설정)
-   **스키마**: 변경 시 트래킹
-   **마스터 데이터 관리**
-   **개인정보보호와 윤리**: 난독화, 보존 기간 등
-   **데이터 접근 규정**

---

### 5.5.3. 데이터 옵스 (DataOps)
-   **자동화**: 원천 시스템 자동화가 데이터 워크플로에 미치는 영향
-   **관찰 가능성**: 원천 시스템 문제 모니터링
-   **사고 대응**: 원천 시스템 문제 발생 시 데이터 파이프라인 작동 고려

---

### 5.5.4. 데이터 아키텍처
-   **신뢰성**: 시스템 장애 빈도 및 복구 시간
-   **내구성**: 하드웨어/네트워크 장애 시 데이터 손실 처리
-   **가용성**: 예정된 시간에 정상 가동/사용 가능 여부
-   **사람**: 설계/엔지니어 변경 시 소통 대상/팀

---

### 5.5.5. 오케스트레이션
-   **주기/빈도**: 정해진 일정에 따라 데이터 제공 여부
-   **공통 프레임워크**: 애플리케이션과 데이터 워크로드 구분

---

### 5.5.6. 소프트웨어 엔지니어링
-   네트워킹
-   인증과 권한
-   접근 패턴
-   오케스트레이션
-   병렬화
-   배포

---

## 5.6. 결론
-   **원천 시스템 팀과 협력**:
    -   쌍방향 커뮤니케이션 및 공유 시스템 구축
    -   분석 및 ML에 영향을 미치는 **스키마/애플리케이션 변경** 통지 프로세스 설정
