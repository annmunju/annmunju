- AWS로 DB 마이그레이션 하기 위한 도구 : AWS DMS & AWS Schema Conversion Tool

### AWS DMS
- 복제 소프트웨어를 실행하는 AWS 클라우드 서버
- 테이블과 연관된 기본키가 타겟에 없는 경우에는 항목을 생성함 (수동 생성 가능)

### AWS SCT
- 데이터베이스 엔진 전환하려는 경우 기존 DB 스키마를 타겟 플랫폼으로 변환
- 소스 데이터베이스의 스키마를 자동으로 변환할 수 없는 경우 타겟 데이터베이스 엔진에서 동등한 스키마를 생성할 수 있는 방법에 대한 지침 제공
- 기존 시스템의 물리적 논리적 구성 요소를 카탈로그로 작성해 마이그레이션 프로세스 가능
- 오픈 소스 DB 엔진으로 마이그레이션 하는 데 필요한 작업량 평가

![[src/Pasted image 20250310140017.png]]
### 1단계: 구상 및 평가
- 현재 환경과 알려진 위험을 평가하고 마이그레이션에 대한 비즈니스 사례 만들기
- SCT를 이용한 마이그레이션 복잡도 평가
	- 단순 작업 1시간 미만 <-> 복잡 작업 4시간 이상
- 변환 작업이 따르는 
	- 데이터베이스 스토리지 객체 (Oracle DB -> AWS Aurora)
	- 데이터베이스 코드 객체 (Oracle PL/SQL 프로시저 -> PostgreSQL PL/pgSQL 프로시저)
	-> 의 평가를 SCT로 확인할 수 있음

### 2단계: 데이터베이스 스키마 변환
- 소스 객체 정의를 타겟 엔진 형식으로 변환 -> 스키마를 빌드할 준비가 되면 타겟 엔진에 스키마가 적용
- 알림 제공
	- 회색, 노란색, 빨간색으로 변환할 수 없는 항목 / 문제가 있는 항목 표시
- 마이그레이션 요구 사항에 맞지 않으면 플레이북을이용하여 디자인 패턴에 대한 정보를 파악해 객체를 다시 코딩
	- Microsoft SQL Server에서 Aurora MySQL로
	- Microsoft SQL Server에서 Aurora PostgreSQL로
	- Oracle에서 Aurora PostgreSQL로
- AWS SCT 확장 팩
	- 소스 데이터베이스에 존재하는 함수 에뮬레이트하는 추가 모듈
	- 설치하기 전에 스키마 변환해야함

### 3단계: 애플리케이션 변환
- AWS SCT를 사용하여 애플리케이션 코드에 포함된 SQL 문을 추출할 수 있음
- 타겟 데이터베이스에서 작동하도록 SQL을 변환하고, 변환된 코드로 애플리케이션 프로그램을 다시 빌드

### 4단계: 스크립트 변환
- ETL, 데이터베이스 유지관리, 재해 복구 및 기타 프로세스에 사용되는 배치 스크립트를 자동 변환

### 5단계: 서드 파티 애플리케이션과의 통합
- 서드 파티 비즈니스 인텔리전스 및 ETL 도구와 같은 애플리케이션에도 변동사항 적용

###  6단계: 데이터 마이그레이션
- 소스에서 타겟으로 데이터 레코드 이동
- 소스, 타겟 각각의 엔드포인트 간 마이그레이션
	- 적어도 둘 중 하나는 AWS 서비스에 엔드포인트가 포함되어야함.
- 전체 로드 마이그레이션, 지속적인 복제, 이들 조합
	- AWS DMS는 초기 전체 로드를 사용한 다음 지속적인 복제를 통해 이러한 두 가지 유형의 데이터 전송을 결합할 수 있음
- 원하지 않는 데이터 레코드 필터링 가능. 진행률 모니터링 가능. (EC2에서 실행됨)

### 7단계: 전체 시스템 기능 테스트
- 상호작용하는 모든 애플리케이션이 이전과 같이 동작하는지 확인

### 8단계: 성능 튜닝
- SQL문에 병목 현상이 있는지 점검

### 9단계: 통합 및 배포
- 가동 중지 최소화를 위한 전략
- 지속 통합: 전체 로드 마이그레이션을 수행하고 지속 복제 설정
![[src/Pasted image 20250310155818.png]]
- 지속 배포: 테스트 이후에 새 DB와 통신하도록 애플리케이션을 변경
![[src/Pasted image 20250310155834.png]]
- 변경 사항 롤백 준비하기

### 10단계: 교육 및 지식 전달

### 11단계: 버전 문서화 및 제어
- IaC를 활용해 모든 아티팩트를 코드로 처리할 수 있음. 버전관리 가능
- AWS CloudFormation, AWS Cloud Development Kit와 같은 도구를 이용해 프로그래밍 방식으로 모든 AWS 리소스 관리
- 데이터베이스 서버를 직접 관리하는 경우 AWS OpsWorks 사용 가능

### 12단계: 프로덕션 후 지원 계획