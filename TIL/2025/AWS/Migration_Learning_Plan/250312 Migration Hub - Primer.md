- AWS로의 마이그레이션을 평가, 계획, 실행 및 추적하기 위해 Amazon Web Services(AWS) 마이그레이션 툴을 파악, 액세스 및 사용하는 곳
- 온프레미스 서버 인벤토리 검색 및 중앙 위치 저장, 애플리케이션을 형성하기 위한 데이터 분석, 종속성 파악, 견적 생성, 마이그레이션 전략 계획, 마이그레이션 자동화 및 추적을 위한 도구를 제공

## 사용시 이점
- 마이그레이션하는 각 애플리케이션을 구성하는 연결과 서버를 시각적 매핑으로 확인
- 서버에서 데이터베이스를 실행하고 있는지 파악할 수 있는 기능도 제공
![[src/Pasted image 20250311130753.png]]
- 기능
	- 인벤토리 파악
		- AWS Application Discovery Service: 주요 리소스의 리소스 할당과 사용률 세부 정보를 수집
		- CSV
		- AWS Application Discovery Agent: 온프레미스 서버와 VM에 설치해  시스템 구성, 시계열 사용률 또는 성능 데이터, 프로세스 데이터 및 전송 제어 프로토콜(TCP) 네트워크 연결을 수집
		- AWS Application Discovery Service Agentless Collector: 에이전트 없는 방식으로 수집. 서버 프로필 정보(예: OS, CPU 수, RAM 양), 데이터베이스 메타데이터, 사용률 메트릭, 온프레미스 서버 간 네트워크 트래픽에 대한 데이터
		- AWS Migration Evaluator: 데이터 인사이트에 엑세스하고 마이그레이션 의사 결정을 가속화. AWS 클라우드에서의 온프레미스 워크로드 실행에 대한 예상 비용 견적과 절감액이 포함된 평가를 제공
		- AWS로 실행할 때의 비용을 이해하는데 도움이 됨
	- 온프레미스 데이터 분석
		- Amazon Athena로 내보내 QuickSight를 사용해 추가 데이터 분석을 실행
	- Strategy recommendation: 전략 추천에 도움
	- EC2 인스턴스 권장 사항: 비용 계획에 있어 가장 저렴하게 생성
	- 오케스트레이션: 마이그레이션에 필요한 종속성 관리 작업을 비롯한 여러 수동 작업을 워크플로로 구성하고 실행.
	- 단일 관리 대시보드: 리호스팅, 리플랫포밍에 대한 최신 상태와 지표가 표시됨. 
	- 리팩터링: 증분 리팩터링을 위한 AWS 인프라 구축 및 운영 작업을 제거

## 구성
- 보안 자격 증명
- 홈 리전 선택
- 마이그레이션 상태 추적
	- 다른 리전으로 마이그레이션하는 경우에도 홈 리전의 MH에서 추적
- Migration Hub 리전 가용성
	- 선택한 리전에서만 사용
- Migration Hub 홈 리전 변경
	- AWS에 직접 문의해야 바뀔수 있음.. 새로운 홈 리전에서 데이터 다시 수집
- 홈 리전 API
	- 외부에서 발생하는 쓰기 작업에 대한 API 호출은 거부되고, 읽기 작업은 허용됨

## 검색 단계
### 온프레미스 리소스 검색
- AWS Application Discovery Service
	- 온프렘 서버 사용량 및 구성 데이터 수집
- 애플리케이션 마이그레이션
	- 앱 별 서버 그룹화. 프로덕션 / 개발 / 샌드박스 환경 등 하위 범주화하면 프로세스를 조율하고 오케스트레이션 하는데 도움이 됨
- 마이그레이션 프로세스
	- 검색 또는 가져오기
	- 계획: 원본에서 수집 분석 -> 서버를 애플리케이션으로 종속성 매핑과 계획도구를 사용해 그룹하여 계획을 세울 수 있음. 
	- 마이그레이션
- 포트폴리오 검색
	- 온프렘에서 자동 검색과 수동 검색: 검색 에이전트 이용 / 플랫 파일 가져오기
	- 클라우드에서 EC2 비용 추정과 검색 데이터 분석
		- 검색 도구는 서버가 물리적인지 가상인지 여부, 수집되는 데이터의 유형, 지원되는 운영 체제, 데이터 업데이트 빈도에 따라 고려

 -> 마이그레이션 홈 리전에서 데이터 캡처: 홈 리전에서 저장 및 처리하며 대상 리전과 관계 없음. 홈 리전이 생기면 검색 프로세스를 시작할 수 있음.

### AWS Discovery Agents 배포
- 검색, 마이그레이션을 위한 온프렘 서버/VM 설치 소프트웨어
	- Linux와 Windows 운영 체제 지원
	- TLS 전송 계층 보안 암호화를 사용해 데이터 전송
- 수집 데이터
	- 운영 체제 정보
	- 시스템 및 프로세스 성능 지표
	- 사용자 이름, 홈 디렉터리, 그룹 이름 등의 사용자 및 그룹 정보
	- 설치된 패키지 및 커널 모듈의 목록
	- DNS 쿼리
	- 네트워크 인터페이스 카드 정보
	- TCP/UDP 프로세스 수신 포트
	- TCP/IP(v4 및 v6) 연결
	- 모든 생성 및 중지 프로세스 이벤트
- 사용
	- IAM 사용자 생성 + 액세스 키를 생성하고 구성
	- 홈 리전 설정
	- 에이전트 설치
	- 수집된 데이터 확인
- 상태 확인: Migration Hub 혹은 온프렘 로컬 서버의 systemctl로 확인

### Application Discovery Service Agentless Collector 사용
- 에이전트를 설치할 필요 없이 가상 머신 구성과 정보를 수집
	- VMware **어플라이언스**로, VMware 가상 머신(VM)에 대한 정보만 수집
	- VMware vCenter Server 환경의 VM으로 설치할 수 있음
- 사용 방법
	- OVA 파일을 다운로드
	- vCenter에서 배포
	- 웹 인터페이스를 통해 Agentless Collector를 구성
	- 데이터 수집 및 확인

### 서버 데이터 수동 가져오기
- CSV (한도 10,000개)
	- 샘플 CSV (탬플릿 확인)
	- 서버에서 내용 입력 후 CSV 탬플릿을 S3 버킷에 전송
	- 가져온 데이터 확인
- 자체 탬플릿에 포함된 필수 필드

|필드 이름 가져오기|설명|예시|
|---|---|---|
|**ExternalId**|사용자 지정 식별자로써 각 레코드를 고유하게 표시하는 데 유용합니다. 예를 들어 ExternalId는 데이터 센터의 서버에 대한 인벤토리 ID일 수 있습니다.|server1  <br>rec1  <br>cmdb_id_1|
|**IPAddress**|서버의 IP 주소가 쉼표로 구분된 목록으로, 따옴표로 묶여 있습니다.|192.168.0.2<br><br>"10.12.31.233, 10.12.32.11"|
|**MACAddress**|서버의 MAC 주소가 쉼표로 구분된 목록으로, 따옴표로 묶여 있습니다.|00:1B:44:11:3A:B7<br><br>"00-15-E9-2B-99-3C, 00-14-22-01-23-45"|
|**HostName**|이 필드는 서버의 호스트 이름입니다. 이 값에 대해 정규화된 도메인 이름(FQDN)을 사용할 것을 권장합니다.|server1  <br>server1.example.com|
|**VMware.MoRefId**|이 필드는 vCenter에서 관리할 때만 필요합니다. Managed Object Reference(MoRef)는 VMware.VCenterId와 함께 제공되어야 합니다.|VirtualMachine-vm-1-db001|
|**VMware.VCenterId**|vCenter에서 관리하는 경우 이는 가상 머신 고유 식별자입니다. VMware.MoRefId와 함께 제공되어야 합니다.|설치 시간에 무작위로 생성되었지만 설치 후에 재구성할 수 있는 0~63 사이의 숫자|

## 평가 단계
- 클라우드 운영에 대한 조직의 현재 준비 상태를 판단
- Migration Evaluator 사용
	- IT 포트폴리오를 검사하고 현재 TCO를 계산
-  Amazon EC2 인스턴스 권장 사항을 참고해 워크로드 비용 계산

### EC2 인스턴스 권장 사항
- 컴퓨팅 리소스의 크기를 알맞게 조정하는데 도움을 줌
	- 기존 성능 워크로드를 처리할 수 있는 가장 저렴한 인스턴스 유형을 권장
- Migration Hub에 사용자의 온프레미스 서버에 대한 데이터가 있어야 함
- 고려사항
	- T2, T3와 같은 순간 확장 가능 인스턴스의 계산 방식은 피크 CPU로 계산
	- 현재 세대 인스턴스만 권장
	- 운영체제 지원하지 않는 경우는 Linux로 권장됨

### 마이그레이션 리소스 태깅
- 태깅으로 추적할 수 있는 내용
	- 프로젝트, 위치, 리전, 비즈니스 요구 사항에 기반한 리소스
	- 비용 할당 태깅을 사용한 비용
	- Application Migration Service로 Migration Hub에서 태그한 마이그레이션 및 리소스
	- Migration Hub Orchestrator 워크플로 중 태그 추가
- Migration Hub에서는 csv 가져오기 탬플릿으로 태그 필드를 추가할 수 있음

## Strategy Recommendations
> 어떤 마이그레이션 전략이 알맞은지 결정하기

- 워크로드를 분석해 런타임 환경을 식별하고 종속성을 처리하며, 사용자가 원할 경우 소스 코드와 데이터베이스도 분석할 수 있음.
- 사용자가 선택한 순서로 비즈니스 목표에 대해 데이터를 비교
	- 마이그레이션 속도, 라이선스 비용 절감, 관리형 서비스 사용, 애플리케이션 현대화 등
- 지원 가능성과 선행 조건
	- 데이터 소스는 AWS Application Discovery Service를 사용해서 수집해야 함
	- IAM 권한 설정
	- vCenter 버전 준수
	- OS 지원 고려
	- Git 리포 개인 엑세스 토큰
	- 데이터베이스 분석을 위해 Secrets Manager 자격증명 보유
- 권장 사항 활용
	- 데이터 수집기 구성 (vCenter에 가상머신으로 배포 혹은 AMI로 사용) 혹은 권장사항 가져오기 파일 추가(S3 버킷)
	- 기본 설정 지정 (비즈니스 목표와 순서 정의)
	- 권장사항 가져오기

## Orchestrator 단계

- 여러 도구 간 종속성을 관리하며 마이그레이션 프로세스를 가시적으로 보여줌으로써 마이그레이션 비용과 시간을 절감하는 데 도움
- HANA 데이터베이스가 포함된 SAP NetWeaver 기반 애플리케이션의 마이그레이션과 AWS로의 애플리케이션 리호스팅(애플리케이션을 변경하지 않고 클라우드로 이동)을 지원
- 이점
	- 사전 정의된 **워크플로 템플릿** 사용으로 마이그레이션 가속화
	- 마이그레이션을 **자동화** 프로세스 사용으로 간소화
	- 하나의 인터페이스에서 모든 마이그레이션 워크플로의 **진행 상황** 추적
	- 워크플로 템플릿의 **사용자 지정** 및 **재사용**으로 SAP NetWeaver 기반 애플리케이션 및 HANA 데이터베이스를 마이그레이션
	- 준비, 복제, 테스트 및 AWS 클라우드로의 애플리케이션 최종적인 전환에 대한 마이그레이션 프로세스 **간소화**

![[src/Pasted image 20250312165415.png]]

### 구성
- 액세스 키가 포함된 IAM 사용자 생성
- Migration Hub Orchestrator 플러그 인 다운로드 및 배포
- AWS, vCenter 및 원격 서버 자격 증명에 대한 Migration Hub Orchestrator 플러그 인 구성
- 마이그레이션을 위한 원본 서버 준비
	- SSH 키 기반이면 퍼블릭 키를 복사해야 함
	- 인증서 기반이면 퍼블릭 키와 서버 인증서를 보유해야함

### 마이그레이션 템플릿 및 워크플로 사용
- 템플릿 참고
	- 템플릿 보기 선택
	- 템플릿 단계를 확인
	- 템플릿에서 생성한 워크플로 확인
- 마이그레이션 워크플로 생성
	- 각 애플리케이션에 하나의 워크플로만 허용되기 때문에 각 애플리케이션의 서버 수를 고려하는 것이 중요
	- 준비 : 원본 서버 운영 체제 지원 확인 / Application Migration Service 콘솔 내에서 첫 번째 사용 개시 / 복제 설정 구성 / Secrets Manager로 마이그레이션 보안 정보 생성
	- 환경 구성시 EC2 인스턴스 구성 가능. 테스트 스크립트를 실행할 수 있음
- 워크플로 관리
	- 마이그레이션 워크플로에서 이름 선택하면 세부정보 나옴
	- 단계를 확인하거나 추가하거나 그룹을 추가하거나 생성할 수 있음


## 마이그레이션 단계
- 리호스팅: 리프트 앤 시프트
- 리플렛포밍: 리프트, 수정 및 시프트
- 리팩터링 또는 리아키텍팅: 애플리케이션이 설계되는 방식을 재구성
- 재구매
- 유지
- 사용 중지

###  AWS Application Migration Service(AWS MGN)
![[src/Pasted image 20250312171855.png]]
- 무중단 테스트 수행
- 물리에서 가상 전환
- 정상적인 비즈니스 운영 유지 ...

### 업데이트 확인
- AWS Migration Hub에서 마이그레이션 진행 상태를 확인하려면 마이그레이션하려는 리소스가 AWS 검색 리포지토리에 있어야 하며 지원되는 도구를 사용해 마이그레이션을 수행

### AWS Database Migration Service
![[src/Pasted image 20250312172038.png]]

### 마이그레이션 추적 판단
- 애플리케이션별로 리소스 그룹화 
- Migration Hub 대시보드 이용
- 태그로 마이그레이션 추적

### Refactor Spaces
- 시나리오
![[src/Pasted image 20250312172357.png]]
- 250311 Migration Hub - Refactor Spaces 참고

