
## 관계형 DB - RDS
- 데이터 인덱싱
	- OLTP
	- OLAP : OLTP에 입력된 내역 데이터를 저장
	- 필요에 맞게 데이터를 호출하고 사용할 수 있음
- 대용량 데이터 세트.  데이터 웨어하우스 구축, 유지, 확장 필요. 데이터 웨어하우스에 로드할 데이터와 스토리지에 보관할 데이터 간에 항상 균형을 유지해야 하는 경우 -> Redshift
- 재해 복구 아키텍처
![[Pasted image 20250318105131.png]]
- 데이터 분석 아키텍처
![[Pasted image 20250318105823.png]]
### Amazon Aurora
- 퍼블릭 원본 수집 아키텍처
![[Pasted image 20250318110441.png]]

- 로그 분석 아키텍처
![[Pasted image 20250318110501.png]]

## 비관계형 DB - NoSQL 

- 키-값 데이터베이스
	- DynamoDB
- 문서 데이터베이스
	- DocumentDB : MongoDB 호환 데이터베이스
- 인 메모리 데이터베이스: 캐싱, 게임 및 세션 스토어에서 사용. 1밀리초 미만 응답 지원
	- ElastiCache: **Redis** 및 Memcached 캐시 엔진을 제공. 
![[Pasted image 20250318112614.png]]
- 그래프 데이터베이스: 복잡한 계층 구조. 빅 데이터 마이닝에 맞춤
	- Neptune: 완전관리형 그래프 데이터베이스 서비스

- 모바일 애플리케이션 백엔드 아키텍처
![[Pasted image 20250318113356.png]]
- IoT 센서 데이터 캡처 아키텍처
![[Pasted image 20250318160415.png]]

## 데이터베이스 마이그레이션
- 동종 마이그레이션
- 이종 마이그레이션 - AWS Schema Conversion Tool 사용

## 서버 기반 아키텍처
![[Pasted image 20250320111230.png]]
- RDS : Amazon Aurora, PostgreSQL, MySQL, MariaDB, Oracle, SQL Server
- 공동 책임 모델
![[Pasted image 20250320112604.png]]

## 서버리스 아키텍처
![[Pasted image 20250320113526.png]]
- DynamoDB
	- ACID(Atomicity, Consistency, Isolation, Durability) 트랜잭션 지원
	- Amazon DynamoDB Accelerator(DAX): 고가용성 완전관리형 캐싱 서비스 (메모리 스토어)
- Aurora Serverless
	- 자동 시작 및 종료. 용량도 자동 조정
	- 사용한 만큼 지불. 예측 불가능한 워크로드에 적절

### 데이터베이스 유형 및 사용 사례
![[Pasted image 20250320114845.png]]

![[Pasted image 20250320114903.png]]


## Amazon Neptune
- 완전관리형 그래프 데이터베이스 서비스
- 관계 탐색. 노드간 공통 데이터 포인트 빠른 식별.
- ACID 규정 준수
- 관계 (최고 수준 개체) - 데이터 (노드와 링크)
- 사용 예) 소셜 네트워크 서비스, 부정 탐지 등
- 데이터베이스 인스턴스 사용 (읽기 쓰기 지원, 볼륨 데이터 수정 지원)
- 복제본 사용 (기본 DB 인스턴스와 동일한 스토리지 볼륨에 연결되며 읽기만 지원. 15개 복제 가능)
- 클러스터 볼륨 사용. 단일 리전에 여러 가용영역에 있는 데이터 복사본으로 구성. 엔드포인트를 사용해 연결
	- 클러스터 엔드포인트: 클러스터 기본 인스턴스에 연결. 하나만 존재함
	- 리더 엔드포인트: 각 복제본에 엔드포인트 연결
	- 인스턴스 엔드포인트: 특정 데이터베이스 인스턴스에 연결. 클러스터/리더엔드포인트 사용이 부적합한 경우에는 인스턴스 엔드포인트가 DB 클러스터에 대한 연결을 직접 제어
- 사용자 보호는 IAM 사용
- 암호화는 HTTP 통신 / AES-256 비트 암호화 / KMS 

## Amazon Redshift
- 완전관리형 데이터 웨어하우스
- 관계형 DB에서 생성된 집계값을 저장하고 유지하는데 사용
- 인프라 자동 프로비저닝, 백업, 복제, 내결함성 등과 같은 관리 작업 자동화
- 동시성 확장 기능. 클러스터 용량도 자동 추가하고 수요 감소하면 추가 용량 제거
- 스펙트럼 : s3 등에 저장된 모든 것들도 쿼리할 수 있는 기능
- 대규모 병렬 방식의 열 기반 아키텍처
- 리더 노드와 컴퓨팅 노드들로 구성된 Redshift cluster에 SQL endpoint를 붙임 -> 외부에 DB 클라이언트가 SQL 엔드포인트에 쿼리를 보냄 -> 리더 노드는 이를 받아 다른 컴퓨팅 노드들로 병렬 전송 -> 컴퓨팅 노드들이 일해서 리더 노드에 반환 -> 리더 노드가 이를 집계하여 보고서를 클라이언트로 다시 보냄
- 비용 부과
	- 클러스터 노드 유형 선택. 
	- 온디맨드 : 클러스터의 노드 유형과 개수에 따라 비용 시간당 부과
	- 동시성 확장 요금 : 무료 일일 크레딧 초과시 초당 온디멘드 요금 내면 됨
	- 예약 인스턴스 요금 : 1, 3년 약정
	- 스팩트럼 요금
- 핵심 요소 클러스터
	- 리더 노드 : 분산 하고, 돌려 받으면 클라이언트로 반환
	- 컴퓨팅 노드: 작업을 여러 조각으로 분할. 노드가 작업의 할당 부분을 처리. 작업 완료시 리더 노드로 반환
- JDBC, ODBC 드라이버를 사용하는 모든 애플리케이션 사용 가능
- 보안
	- 클러스터 액세스 제어. IAM 자격증명 사용. 
	- VPC 사용으로 격리
	- 데이터 웨어하우스 통신은 HTTP 사용. SSL로 보호 / AES-256 암호화 /. KMS 사용

## Amazon DocumentDB
- json 사용시 RDB 연결 복잡해서 생김. 클래스 객체로 만들어 사용
- 애플리케이션 빠르게 빌드하고 반복할 . 수있음
- 문서 쿼리에 처리량이 많고 지연시간이 짧은 완전관리형 문서 데이터베이스
- 유연한 인덱싱, 임시 쿼리 분석. 강력한 분석. 애플리케이션 리얼타임 운영 가능.
- 모음에 저장되고 필드 똑은 키-값, 중첩을 포함.
- 비용
	- 온디멘드 : 종량제. 초단위.
	- 스토리지 : 10gb ~ 64tb 자동 증량 월별 GB 단위로 청구.
	- 단일리전 백업 스토리지 100프로까지는 추가 비용 X. 이상은 청구
	- IOPS 100만건 늘어날때마다 청구.
	- Doc DB로 보내는 데이터는 비용 없는데, 외부로 전송할 때는 월별 gb당 요금 청구
- 구성 요소
	- 클러스터 : 하나 이상의 인스턴스와, 그 인스턴스 데이터를 관리하는 클러스터 스토리지 볼륨으로 구성됨
	- 모든 쓰기는 기본 인스턴스로 하고, 복제는 읽기 지원.
	- 클러스터 데이터는 볼륨에 저장되고 3개의 상이한 가용영역에 걸쳐 6개의 데이터 사본을 저장.
	- VPC 내에서만 실행 가능. 논리적 격리 섹션 제공
- 보안
	- IAM 사용자, 역할, 정책으로 인증 및 권한 부여 
	- 클러스터는 기본적으로 TLS 전송 계층 보안으로 보안 연결 수락
	- 데이터 암호화. AES-256 / KMS (유휴상태의 데이터 포함)

## Amazon ElastiCache
- 완전관리형 Redis 및 Memcached 분산 메모리 캐시
- 캐시: 빠른 검색을 위해 자주 액세스하는 데이터를 메모리에 저장하는 방법
- Redis: 복잡한 데이터 유형, 데이터 복제, 고가용성을 각각 지원. 세션 캐싱, 전체 페이지 캐싱, 메시지 대기열 애플리케이션, 순위표 등
- Memcached: 비교적 작고 정적인 데이터에 사용되는 캐시. 정적 HTML 페이지 또는 JavaScript 및 CSS 파일
- 작동 방식
	- 애플리케이션이 ElastiCache에 먼저 쿼리
	- 포함되어 있으면 반환, 없으면 애플리케이션이 데이터베이스로 요청 전송
	- 데이터베이스에서 ElastiCache와 애플리케이션에 콘텐츠를 모두 반환
- 비용
	- 온디맨드: 메모리 용량에 대해 시간당 요금 지불
	- 예약: 1년 혹은 3년 약정 기간동안 사용
- 캐시 종류
	- 기본 제공
	- 애플리케이션
	- 원격: DB와 App의 응답성 개선 - 중앙 집중식 인 메모리 리포지토리 <- ElastiCache
- 캐싱 접근 방식
	- 지연 로딩: 반응적 캐싱. 데이터는 맨 처음 요청될 때 캐시에 저장됨
	- 동시 기록: 선제적인 캐싱 방식. 데이터베이스에 저장되는 동시에 캐시에 저장
- 보안
	- IAM / VPC
	- 온프렘에서 사용 가능 (Direct Connect or VPN)
	- 저장 중 암호화와 전송 중 암호화 지원
	- AUTH 기능을 사용해 클라이언트 인증 가능
	- HIPAA, FedRAMP 및 PCI DSS와 호환

## Amazon Quantum Ledger Database

- 완전관리형 원장 데이터베이스
- 원장은 특정 유형의 재무 계정을 수록한 장부 또는 기타 모음의 형태로 보존. 오늘날에는 재무 사례뿐 아니라 모든 유형의 기록 시스템이 필요한 상황에서 원장이 사용되는 것을 볼 수 있습니다. 여기에는 제조 프로세스의 결함 기록, 보험 청구 내역 기록, 심지어는 인사 관리, 급여 시스템 기록 등이 포함됨.
- 변경 불가능 및 투명성

- 데이터는 저널에 기록됨
	- 데이터는 저널에 맨 먼저 커밋되는 변경 불가능한 트랜잭션 로그
	- 저널은 암호화 기법을 사용해 순차적으로 각 트랜잭션의 로그를 저장함
	- 데이터가 저널에 기록되면 테이블에 구체화되어 더 빠르고 더 효율적인 쿼리가 가능
	- 변경 불가능한 저널이 기본적으로 제공됨
- 암호화
	- 해시 함수 (SHA-256) 사용
	- 다이제스트라는 데이터 변경 내역의 보안 출력 파일 생성
	- 암호화를 사용하여 모든 트랜잭션을 함께 해시 체인하고 데이터의 변경 내역을 간략히 정리한 요약을 생성
	- 보안 체인과 그 요약(흔히 다이제스트라고 함)은 암호화 해시 함수(SHA-256)를 사용하여 생성
- 작동 방식
	- ACID 의미 체계를 통한 트랜잭션, 유연한 문서 데이터 모델, 간단한 쿼리 언어 등을 지원
	- 서버리스 DB. 자동 확장됨
	- PartiQL 지원 -> SQL 호환 쿼리를 제공
- 구성 요소
	- 원장: 테이블 변경 사항을 열거한 변경 불가능한 내역 유지 테이블 세트와 저널로 구성
		- 저널: 일련의 순차 블록들로 구성. 변경 사항을 확인할 수 있도록 이전 블록에 암호화 방식으로 연결됨. 현재 상태와 내역을 나타냄
	- 테이블: 문서 수정 모음 포함. 원장 내에 존재.
	- 문서
- 보안
	- 모든 트랜잭션 암호화. 암호화 방식으로 검증 가능.
	- IAM 자격 증명 기반 정책 사용
- 모니터링 : CloudWatch