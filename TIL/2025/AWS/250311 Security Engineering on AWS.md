## 1. 보안 원칙 살펴보기
- 클라우드 보안 이점
	- 탄력성
	- 속도 및 민첩성
	- 종량 과금제
- AWS Well-Architected Framework 5대 분야
	- 운영 우수성
	- 보안
		- 자격 증명 및 액세스 관리 (AWS IAM)
		- 인프라 보호 (VPC, WAF, Shield, Inspector)
		- 데이터 보호 (KMS, Secrets Manager)
		- 탐지 (CloudTrail, CloudWatch, EventBridge)
		- 인시던트(예기치 못한 사건, 사고, 문제, 또는 이슈) 대응 (Incident Manager, Lambda)
	- 신뢰성
	- 성능 효율성
	- 비용 최적화
	- 지속 가능성

## 2. 클라우드의 보안
- AWS 공동 책임 모델에 따른 보안 책임 구분
- 디지털 서비스 개발시에 고려해야하는 논리적 계층(영역)
	- Data
	- App, Platform
	- OS
	- 서버
	- 네트워크
	- 데이터 센터 
- 고객은 클라우드 내부 보안을 책임 / AWS는 클라우드 자체의 보안을 책임
- 글로벌 인프라
	- 데이터 센터의 보안
		- 경계 계층
		- 환경 계층
		- 인프라 계층
		- 데이터 계층 (물리적으로 디스크 파쇄 까지...)
- 가용 영역와 리전
	- AWS 가용 영역은 완전 이중화 구성, 전용, 지연시간이 짧은 데이터 센터간의 전용 회선을 보유하고 있음. 장애가 발생하면 트래픽을 로드밸런싱함
	- 리전은 여러 가용영역 (일반적으로 3개 이상)으로 구성되며 가용 영역은 분리되어 있어 장애 발생되도 서로는 영향 없음.
	- 알맞은 리전 선택: 규정 준수, 고객 지연 시간, 비용, 서비스 가용성에 따라 선택
- 규정 준수 및 거버넌스
	- AWS 컴플라이언스 센터로 규제 요규 사항 식별. 국가별 리소스를 검색할 수 있고 규정 준수 프로그램을 찾아볼 수 있음
- AWS Artifact: 규정 준수 감사 보고서 및 증명 자료 제공하는 리소스
- AWS Config: AWS의 구성 정보들을 Inventory화 함. (Configuration DB. CNDB) 규정 준수가 잘 되었는 지속적으로 평가함.
	- config 규칙을 적용하면 K-ISMS (한국 인터넷 보안)을 빠르게 적용 가능

## 3. 자격 증명 및 액세스 관리
- 3가지 AWS 이용 방법
	- AWS Management Console
	- AWS CLI
	- AWS SDK
- 위 3가지 방법을 이용해 HTTP/HTTPS 클라이언트에 요청하여 AWS 서비스에 접근 -> IAM 권한 확인 후 접근 허용
- IAM
	- 사용자: 자격증명 관리 중앙 집중화
	- 그룹
	- 역할: 임시 자격증명 엑세스 및 여러 계정에서 페더레이션 액세스
		- 역할이 지정된 동안은 기존 권한은 사용할 수 없고 해당하는 역할만 수행할 수 있음 (최대 12시간의 임시 기간 내)
		- 패더레이션 엑세스 가능: AWS 외부 사용자가 AWS 리소스에 접근할 수 있도록 설정 가능
- 보안 자격 증명
	- 사용자 이름과 암호
	- MFA 멀티팩터인증
	- 사용자 액세스 키
- 자격 증명 기반 정책 & 리소스 기반 정책
	- OR 연산자가 적용됨. 둘 다 본다.
	- (둘 중 하나가 없을때) 둘 중 하나가 허용이면 허용. 둘 중 하나가 거부면 거부.
	- (각각 ALLOW, DENY가 지정되어 있을 때) 거부: 거부가 더 높음
- 암호화를 통한 보호
	- 클라이언트 측 암호화: 클라이언트가 암호화를 해서 AWS로 데이터 보냄. 암호화 키를 안전하게 관리해야함
	- 서버 측 암호화: KMS와 같은 서비스를 이용. 업로드하면 데이터 암호화되고 다운로드 하면 복호화 되도록 서버에서 암호화.

### 실습 1: 보안 정책 소개 ...

## 4. 인프라 및 데이터 보호
- 네트워크 인프라 보호
	- VPC: 논리적 격리된 공간을 프로비저닝하여 가상 네트워크에서 리소스를 시작할 수 있음. IP 주소 범위, 퍼블릭 / 프라이빗 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등을 설정할 수 있음.
- 보안그룹과 ACL 비교 (둘 다 방화벽 역할)

| **특징**         | **보안 그룹 (Security Group)**                                    | **네트워크 ACL (Network ACL)**                               |
| -------------- | ------------------------------------------------------------- | -------------------------------------------------------- |
| **적용 범위**      | 인스턴스 단위에서 작동 (예: EC2 인스턴스, ALB 등)                             | 서브넷 단위에서 작동                                              |
| **상태 관리**      | 상태 저장 (Stateful): 인바운드 요청이 허용되면 해당 요청에 대한 아웃바운드 응답은 자동으로 허용됨. | 상태 비저장 (Stateless): 인바운드와 아웃바운드 트래픽 규칙을 각각 명시적으로 정의해야 함. |
| **규칙 종류**      | 허용(Allow) 규칙만 지원                                              | 허용(Allow) 및 거부(Deny) 규칙 모두 지원                            |
| **규칙 우선순위**    | 모든 규칙을 평가한 후 일치하는 규칙 적용                                       | 규칙 번호 순서대로 평가, 먼저 일치하는 규칙이 적용됨                           |
| **적용 방식**      | 특정 보안 그룹에 연결된 인스턴스에만 적용                                       | 서브넷 내 모든 리소스에 자동으로 적용                                    |
| **트래픽 제어 방향**  | 인바운드 및 아웃바운드 트래픽을 제어                                          | 인바운드 및 아웃바운드 트래픽을 제어                                     |
| **사용 사례**      | 특정 인스턴스나 리소스의 세밀한 보안 설정이 필요한 경우                               | 서브넷 전체의 트래픽을 제어하거나 기본적인 네트워크 보안을 설정할 때 사용                |
| **설정 가능 규칙 수** | 최대 60개의 인바운드 및 60개의 아웃바운드 규칙 지원                               | 기본적으로 최대 20개의 인바운드 및 20개의 아웃바운드 규칙 지원 (최대 40개까지 확장 가능)   |

- 엣지 보안
	- WAF : 악성 웹 요청을 감지 및 차단
		- 웹 ACL 생성 및 규칙 추가 / 원치 않는 트래픽 차단 및 필터링 / 트래픽 및 로그 데이터 모니터링
		- HTTP 헤더를 열어봐서 거기 있는 데이터에서 위험요인을 파악하고 막는 보안 서비스 (Frontend와 주로 연결됨)
		- CloudFront, API GW, ALB 등
		- 차단 및 필터링 등 사용자 지정할 수 있음
	- CDN 서비스: 전세계의 Pop 사이트(엣지 로케이션)에 Cache형태로 저장해놓고 내려받도록 저장. 컨텐츠 스트리밍 서비스를 제공하는 플랫폼에서 주로 사용. AWS CloudFront로 사용 가능
- DDos 완화
	- Shield 
		- 네트워크 레벨에서 보호해주는 것은 무료이나 애플리케이션 레벨은 유료
- 인프라 완화 서비스
	- Route 53
	- CloudFront
	- Direct Connect
	- CloudFormation
	- Firewall Manager: WAF 및 Shield Advanced 관리 작업을 중앙에서 관리
- 컴퓨팅 리소스 보호
	- AMI: EBS 스냅샷, 루트 볼륨(c 드라이브)용 템플릿, 시작 권한, 블록 디바이스 매핑이 포함된 아마존 머신 이미지. 인스턴스 부팅에 필요한 모든 정보를 포함함.
	- E2C 인스턴스 유형
		- 범용
		- 컴퓨팅 최적화 (CPU)
		- 메모리 최적화 (Memory)
		- 가속 컴퓨팅 (GPU)
		- 스토리지 최적화 (물리 서버의 자체 디스크를 사용하므로 높은 디스크 처리량을 요할 때 사용)
	-> Inspector를 이용해 리소스 검색, EC2 자동 보안 평가 실행
	- Systems Manager
		- 시스템 인벤토리 수집, 운영 체제 패치 적용 등

## 5. 탐지 및 대응
### 모니터링 및 탐지 제어
- CloudTrail: 사용자 활동 모니터링
	- 로그 파일은 s3, cloudwatch logs로 전송될 수 있음
- API 보안 관련 정보를 기록
	- 호출자 자격 증명
	- 요청 파라미터
	- 응답 요소 등
- CloudWatch: 리소스와 애플리케이션 모니터링
	- cloudwatch logs와 통합
	- 로그 분석 도구가 추가로 필요
	- 사용률과 같은 것에 경보를 추가할 수 있음
- Trusted Advisor
- EventBridge
- Security Hub
- GuardDuty


