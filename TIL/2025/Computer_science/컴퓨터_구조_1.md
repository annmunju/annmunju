# 1_하드웨어

## 구성
- CPU
	- 산술논리연산장치 ALU
	- 제어장치 CU
	- 레지스터
- 메모리와 캐시 메모리
- 보조기억장치
	- HDD SSD
	- (기술) RAID
- 입출력장치
- 메인보드 (마더보드)
- 시스템 버스 : 부품간 정보를 주고받는 통로

### 저장장치의 계층 구조
> CPU와 가장 가까운 저장장치는 빠르고, 멀리있는건 느리다.
> 속도 빠른건 비싸고 용량이 작다.
1. 레지스터
2. 캐시 메모리
	1. L1캐시
	2. L2캐시
	3. L3캐시
3. 메모리
4. 보조기억장치


---


# 2_컴퓨터가_이해하는_정보

## 숫자 표현 

### 소수점
- 부동소수점을 이진법으로 저장하는 방식 IEEE 754
	- 딱 맞아 떨어지지 않는 소수가 있기 때문에 오차 발생할 수 있음

## 문자 표현
- 아스키코드표
- 한글 표현은 EUC-KR
- 유니코드 (다양한 국가별 언어, 이모티콘 포함)
- base64 (이미지도 변환 가능)

## 명령어
- 연산 코드와 오퍼랜드로 구성
	- 연산자와 피연산자
- 오퍼랜드 : 주소 필드
	- 연산될 데이터의 위치 (메모리 주소, 레지스터 이름 등)
- 연산 코드 : 명령어
	- MOVE, STORE ...

- 기계어와 어셈블리어
	- 기계어 0101, 어셈블리어 push 
- 명령어 사이클
	- 인출 사이클 -> 실행 사이클 -> 인출 사이클 등 반복하는 과정을 거치는 경우가 있음
	- 그 사이 간접 사이클이 추가될 수 있음
	- + 인터럽트 사이클


---


# 3_CPU

## 레지스터
- CPU 안 작은 임시 저장장치
- 운영체제 별 각기 다른 레지스터들 존재

### 종류
- 프로그램 카운터
	- 메모리에서 다음으로 읽어들일 명령어 주소 저장
	- = 명령어 포인터
- 명령어 레지스터 
	- 방금 읽은 명령어를 저장
- 범용 레지스터
	- 일반적 상황에서 사용. 데이터 명령어 주소 모두 저장 가능
- 플래그 레지스터
	- 연산 결과 혹은 CPU 상태에 대한 부가정보인 플래그 값을 저장
	- 플래그 종류 : 부호 플래그, 제로 플래그, 캐리 플래그, 오버플로우 플래그, 인터럽트 플래그, 슈퍼바이저 플래그
- 스택 포인터
	- 메모리 내 스택 영역의 최상단 위치를 가리키는 레지스터

## 인터럽트
- 방해하다, 중단시키다. CPU의 작업을 방해하는 신호
- 동기 : 프로그래밍 오류같은 예외적인 상황 (exception) , 비동기 : 입출력장치에 의해 발생 (하드웨어 인터럽트)

### 하드웨어 인터럽트
- 처리 순서
1. 입출력장치는 CPU에게 **인터럽트 요청 신호**를 보낸다.
2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전에 항상 인터럽트 여부를 확인한다.
3. CPU는 인터럽트 요청을 확인하고, **인터럽트 플래그**를 통해 현재 인터럽트를 받아들일 수 있는 여부를 확인한다.
4. 인터럽트를 받아들일 수 있다면 CPU가 지금까지의 작업을 백업한다.
5. CPU는 **인터럽트 벡터**를 참조하여 **인터럽트 서비스 루틴**을 실행한다.
6. 인터럽트 서비스 루틴 실행이 끝나면 4에서 백업해둔 작업을 복구해 실행을 재개한다.

- 인터럽트 서비스 루틴 (인터럽트 핸들러)
	- 인터럽트가 발생하면 어떻게 행동해야할지 알려주는 프로그램
- CPU의 실행 사이클
	- 인출 사이클
	- 실행 사이클
	- 간접 사이클
	- 인터럽트 사이클

### 동기 인터럽트 (예외)
- 폴트
	- 예외가 발생한 명령어부터 실행 재개
- 트랩
	- 예외가 발생한 명령어의 다음 명령어부터 실행 재개
- 중단
	- 실행중 프로그램을 강제로 중단할 수 밖에 없는 심각한 오류를 발견했을 때 발생하는 예외
- 소프트웨어 인터럽트
	- 시스템 콜이 발생했을 때의 예외

## CPU 성능향상

- 클럭속도
	- 클럭이 1초에 몇번 반복되는지 (헤르츠 단위)
	- 속도 높아지면 명령어 사이클이 더 빨리 반복함. 하지만 발열 심해질 수 있음
- 멀티코어
	- 코어 : 명령어 읽기-해석-실행 부품 단위 개수 
	- 코어 여러개 = 멀티코어
- 멀티스레드
	- 스레드는 실행 흐름의 단위. 

| 하드웨어 스레드               | 소프트웨어 스레드                                   |
| ---------------------- | ------------------------------------------- |
| (논리 프로세서)              |                                             |
| 하나의 코어가 동시 처리하는 명령어 단위 | 하나의 프로그램에서 독립적으로 실행되는 단위                    |
| 병렬성을 지님 (물리적으로 동시 처리)  | 동시성을 지님 (빠르게 번갈아 실행하며 <br>동시에 처리하는 것 처럼 보임) |

## 파이프라이닝을 통한 명령어 병렬 처리
- 명령어가 처리되는 과정: 명령어 인출 -> 해석 -> 실행 -> 결과 저장
	- 다른 명령어가 해석되는 동안, 또 다른 명령어를 인출하는 식으로 동시에 처리할 수 있음. 이러한 기법이 명령어 파이프라이닝
- 명령어 집합 유형
	- CISC : 다채로운 기능을 지원하는 복잡한 명령어로 구성된 집합
	- RISC : 짧고 규격화된 명령어
	- 파이프라이닝으로는 RISC가 유리. CISC는 각 명령어의 간격이 규칙적이지 않음
- 파이프라이닝으로 CPU 성능 향상에 실패하는 경우: 파이프라인 위험
	- 데이터 위험: 데이터 의존성에 의해 발생
	- 제어 위험: 프로그램 카운터의 갑작스런 변화로 발생
	- 구조적 위험: 명령어 겹쳐 실행하는 과정에서 동시에 같은 CPU 부품을 사용하려 할 때