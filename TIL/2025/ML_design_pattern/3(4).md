<!-- 147p -->

## 3.4 디자인 패턴 8: 캐스케이드

### 문제 
- 단일의 큰 모델이 다하는게 아니라, 부분에 대해 예측하는 모델 나누기
- 한 모델의 출력이 다음 모델에 대한 입력이 되거나, 다음 모델의 선택을 결정하도록 하기 -> 캐스케이드

### 솔루션
- 상황을 식별하는 분류 모델
- 비정상적 상황에서 학습된 하나의 모델
- 일반적 상황에서 학습된 별도 모델
- 최종 출력은 두 출력의 확률적 조합으로, 두개의 개별 모델의 출력을 결합하는 모델

- 예시) 자전거 비축 비용 추정을 위한 자전거 대여소/반납소 간 거리 예측
    1. 자전거 대여 시작시간, 장소, 사용자가 회원인지 여부를 고려해야함
    2. 4시간 이상 대여 사용자와 그렇지 않은 사용자의 행동이 다름
    3. 그래서 자전거 대여 목적이 일반인지 장거린지에 따라 먼저 분류하도록 모델 학습
    4. 해당 분류를 마친 후 거리를 예측하도록 모델 학습
- 업스트림 모델의 예측을 기반으로 실험이 진행될 때마다 2개의 다운스트림 모델에 대한 학습 데이터셋이 생성되도록 하는 것.
    - kubeflow 파이프라인 활용

### 트레이드오프와 대안
- 캐스케이드는 머신러닝 워크플로를 복잡하게 만든다
    - 하나의 파이프라인에 하나의 머신러닝 문제 해결 권고

- 결정론적 입력
    - ML 문제를 여러 단계로 분할하지 말기. 그냥 모델에 대한 입력으로 조건 추가하기
- 단일 모델
    - 여러개로 쪼갤 분명한 이유가 있을경우에만 수행
- 내부 일관성
    - 후속 모델에 대한 입력이 필요할 때만 사용
- 사전 학습된 모델의 출력을 다른 모델의 입력으로 사용할 때 사용
- 캐스케이드를 리프레이밍으로 대체
    - 다른 문제로 정의해보기
- 희귀한 상황에서의 회귀
    - 일부 패턴 값이 다른 값보다 훨씬 더 일반적인 데이터를 바탕으로 회귀를 수행할 때 유용. 분명한 분할이 가능할때나 쓰라는거.
    - 예를 들면 비올지/안올지 -> 비오면 강우량 얼마인지 예측 등

